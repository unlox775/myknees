{"version":3,"file":"background.js","mappings":";;;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAGA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AA0BA;AAAA;AAAA;AAAA;AAxBA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAzCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2CA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAIA","sources":["webpack://ai-data-scraper-extension/./src/background.js"],"sourcesContent":["// Background service worker for AI Data Scraper extension\n\nclass BackgroundService {\n  constructor() {\n    this.initialize();\n  }\n\n  initialize() {\n    // Listen for extension installation\n    chrome.runtime.onInstalled.addListener((details) => {\n      console.log('AI Data Scraper extension installed:', details.reason);\n      this.setupDefaultStorage();\n    });\n\n    // Listen for messages from content scripts and popup\n    chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n      this.handleMessage(message, sender, sendResponse);\n      return true; // Keep message channel open for async response\n    });\n\n    // Handle tab updates\n    chrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {\n      if (changeInfo.status === 'complete' && tab.url) {\n        this.handleTabUpdate(tabId, tab);\n      }\n    });\n  }\n\n  async setupDefaultStorage() {\n    const defaultData = {\n      trainingSessions: [],\n      scrapedData: [],\n      settings: {\n        autoStart: false,\n        debugMode: false,\n        overlayOpacity: 0.3\n      }\n    };\n\n    await chrome.storage.local.set(defaultData);\n    console.log('Default storage initialized');\n  }\n\n  async handleMessage(message, sender, sendResponse) {\n    try {\n      switch (message.type) {\n        case 'START_TRAINING':\n          await this.startTraining(message.data, sender.tab?.id);\n          sendResponse({ success: true });\n          break;\n\n        case 'STOP_TRAINING':\n          await this.stopTraining(sender.tab?.id);\n          sendResponse({ success: true });\n          break;\n\n        case 'SAVE_TRAINING_DATA':\n          await this.saveTrainingData(message.data);\n          sendResponse({ success: true });\n          break;\n\n        case 'GET_TRAINING_SESSIONS':\n          const sessions = await this.getTrainingSessions();\n          sendResponse({ success: true, data: sessions });\n          break;\n\n        case 'EXECUTE_SCRAPING':\n          await this.executeScraping(message.data, sender.tab?.id);\n          sendResponse({ success: true });\n          break;\n\n        case 'GET_SCRAPED_DATA':\n          const data = await this.getScrapedData();\n          sendResponse({ success: true, data });\n          break;\n\n        default:\n          console.warn('Unknown message type:', message.type);\n          sendResponse({ success: false, error: 'Unknown message type' });\n      }\n    } catch (error) {\n      console.error('Error handling message:', error);\n      sendResponse({ success: false, error: error.message });\n    }\n  }\n\n  async startTraining(trainingConfig, tabId) {\n    if (!tabId) {\n      throw new Error('No tab ID provided for training');\n    }\n\n    const message = {\n      type: 'START_TRAINING_MODE',\n      data: trainingConfig\n    };\n\n    await chrome.tabs.sendMessage(tabId, message);\n    console.log('Training mode started for tab:', tabId);\n  }\n\n  async stopTraining(tabId) {\n    if (!tabId) return;\n\n    const message = { type: 'STOP_TRAINING_MODE' };\n    await chrome.tabs.sendMessage(tabId, message);\n    console.log('Training mode stopped for tab:', tabId);\n  }\n\n  async saveTrainingData(trainingData) {\n    const { trainingSessions } = await chrome.storage.local.get(['trainingSessions']);\n    trainingSessions.push({\n      ...trainingData,\n      id: Date.now().toString(),\n      createdAt: new Date().toISOString()\n    });\n\n    await chrome.storage.local.set({ trainingSessions });\n    console.log('Training data saved:', trainingData);\n  }\n\n  async getTrainingSessions() {\n    const { trainingSessions } = await chrome.storage.local.get(['trainingSessions']);\n    return trainingSessions || [];\n  }\n\n  async executeScraping(scrapingConfig, tabId) {\n    if (!tabId) {\n      throw new Error('No tab ID provided for scraping');\n    }\n\n    const message = {\n      type: 'EXECUTE_SCRAPING',\n      data: scrapingConfig\n    };\n\n    await chrome.tabs.sendMessage(tabId, message);\n    console.log('Scraping executed for tab:', tabId);\n  }\n\n  async getScrapedData() {\n    const { scrapedData } = await chrome.storage.local.get(['scrapedData']);\n    return scrapedData || [];\n  }\n\n  handleTabUpdate(tabId, tab) {\n    // Inject content script if needed\n    if (tab.url && tab.url.startsWith('http')) {\n      console.log('Tab updated:', tabId, tab.url);\n    }\n  }\n}\n\n// Initialize background service\nnew BackgroundService();"],"names":[],"sourceRoot":""}